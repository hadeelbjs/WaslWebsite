<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+Bhaijaan+2:wght@400..800&family=Caudex:ital,wght@0,400;0,700;1,400;1,700&family=Reem+Kufi+Fun:wght@400..700&display=swap" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+Bhaijaan+2:wght@400..800&family=Caudex:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
       
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=arrow_back" />
   
    <title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙÙƒØ±Ø©</title>
 
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Baloo Bhaijaan 2', 'Tajawal', 'Cairo', sans-serif;
            background: #F8F8F8;
            text-align: right;
            color: #09315D;
        }
        .container {
            width: 100%;
            height: 100vh;
            background: white;
            padding: 20px;
            border-radius: 0;
            box-shadow: none;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .back-arrow {
            font-size: 60px;
            cursor: pointer;
            font-weight: bold;
        }
        .logo {
            width: 120px;
        }
        .fav-icon-container {
            text-align: left;
            margin-top: 10px;
        }
        .fav-icon {
            width: 30px;
            height: 30px;
            cursor: pointer;
        
 
        }
        h2 {
            font-size: 2em;
            margin-top: 60px;
            text-align: right;
            padding: 15px;
            padding-top: 35px;
        }
        .input-box, .textarea-box {
            background: #ECECEC;
            border-radius: 8px;
            padding: 12px;
            margin: 10px 0;
            width: 100%;
            text-align: right;
            font-size: 16px;
            display: block;
        }
        .textarea-box {
            height: 80px;
        }
        .investment-btn {
            width: 100%;
            padding: 10px;
            background: #A6938A;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 15px;
            width: 120px;
            align-self: center;
        }
        .textarea-box {
    min-height: 140px;
    height: auto;
    overflow-y: auto;
}
a {
text-decoration: none;
color: #09315D;
 

}
.material-symbols-outlined {
            font-size: 40px;
            color: #072D57;
            position: absolute;
            left: 2vw;
            cursor: pointer;
        }
        .logo {
    position: absolute;
    top: 5px;
    right: 15px;
    width: 80px;
}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="Ideas.html">
                <img src="images/Logo.png" alt="Ø§Ù„Ø´Ø¹Ø§Ø±" class="logo">
            </a>
            <a href="Ideas.html">
                <span class="material-symbols-outlined">arrow_back</span>
            </a>
        </div>
        <h2>ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙÙƒØ±Ø©</h2>
 
        <div class="fav-icon-container">
            <img src="images/favIcon.png" alt="Ø§Ù„Ù…ÙØ¶Ù„Ø©" class="fav-icon">
        </div>
 
<!--  Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„ØªÙŠ Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡Ø§ Ø¹Ø¨Ø± JavaScript -->
<div class="input-box" id="idea-title">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙÙƒØ±Ø©: ...</div>
<div class="textarea-box" id="idea-description">ÙˆØµÙ Ø§Ù„ÙÙƒØ±Ø©: ...</div>
<div class="input-box" id="idea-date">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø±: ...</div>
<div class="input-box" id="idea-domain">Ù…Ø¬Ø§Ù„ Ø§Ù„ÙÙƒØ±Ø©: ...</div>
 

      
        <button class="investment-btn">Ø·Ù„Ø¨ Ø§Ø³ØªØ«Ù…Ø§Ø±</button>
    </div>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
        import {
          getFirestore,
          doc,
          getDoc,
          updateDoc,
          arrayUnion
        } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";
       
        // Firebase Config
        const firebaseConfig = {
          apiKey: "AIzaSyC68KD9M_rGGOoyfQaW925LT8ipoj9jE44",
          authDomain: "wasl-523b4.firebaseapp.com",
          projectId: "wasl-523b4",
          storageBucket: "wasl-523b4.appspot.com",
          messagingSenderId: "410509570015",
          appId: "1:410509570015:web:4c9a86048b3e8be0bd1e6a"
        };
       
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
       
        document.addEventListener("DOMContentLoaded", async () => {
          console.log("âœ… Ø§Ù„ØµÙØ­Ø© Ø¬Ø§Ù‡Ø²Ø©");
       
          const ideaId = new URLSearchParams(window.location.search).get("id");
          const favIcon = document.querySelector(".fav-icon");
          const userId = localStorage.getItem("uid");
       
          if (!ideaId) {
            console.warn("âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¹Ø±Ù Ù„Ù„ÙÙƒØ±Ø© Ø¨Ø§Ù„Ø±Ø§Ø¨Ø·");
            return;
          }
       
          console.log("ğŸ“Œ ideaId:", ideaId);
       
          // âœ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙÙƒØ±Ø© ÙˆØ¹Ø±Ø¶Ù‡Ø§
          try {
            const ideaRef = doc(db, "ideas", ideaId);
            const ideaSnap = await getDoc(ideaRef);
       
            if (ideaSnap.exists()) {
              const idea = ideaSnap.data();
       
              console.log("ğŸ“„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙÙƒØ±Ø©:", idea);
       
              document.querySelector("#idea-title").textContent = idea.title || "â€”";
              document.querySelector("#idea-description").textContent = idea.description || "â€”";
              document.querySelector("#idea-domain").textContent = idea.domain || "â€”";
              document.querySelector("#idea-date").textContent = "ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø±: " + (idea.createdAtHijri || "â€”");
       
            } else {
              console.error("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ÙÙƒØ±Ø©");
            }
          } catch (error) {
            console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ÙÙƒØ±Ø©:", error);
          }
       
          // âœ… Ø²Ø± Ø§Ù„Ù…ÙØ¶Ù„Ø©
          if (!userId) {
            alert("âš ï¸ ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹");
            return;
          }
       
          if (favIcon) {
            favIcon.addEventListener("click", async () => {
              console.log("â­ ØªÙ… Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù…ÙØ¶Ù„Ø©");
       
              try {
                const userRef = doc(db, "users", userId);
                await updateDoc(userRef, {
                  favorites: arrayUnion(ideaId)
                });
       
                alert("ğŸŒŸ ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ÙØ¶Ù„Ø©!");
                console.log("âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙÙƒØ±Ø©:", ideaId);
              } catch (error) {
                console.error("âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ÙØ¶Ù„Ø©:", error);
              }
            });
          } else {
            console.warn("âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù…ÙØ¶Ù„Ø©");
          }
        });
        </script>
       
</body>
</html>
 
